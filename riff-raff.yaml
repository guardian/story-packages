stacks:
- cms-fronts
deployments:
  static-story-packages:
    type: aws-s3
    parameters:
      publicReadAcl: true
      cacheControl:
      - pattern: .*\.js$
        value: public, max-age=315360000
      - pattern: .*
        value: public, max-age=60
      mimeTypes:
        js: application/javascript
        json: application/json
        map: text/plain
      prefixStack: false
      bucket: cms-fronts-static-assets
  story-packages:
    type: autoscaling
    parameters:
      bucket: story-packages-dist
    dependencies: [packages-ami]
  packages-ami:
    type: ami-cloudformation-parameter
    parameters:
      cloudFormationStackByTags: false
      prependStackToCloudFormationStackName: false
      cloudFormationStackName: story-packages
      amiTags:
        Recipe: editorial-tools-bionic-java8
        AmigoStage: PROD
      amiParameter: MachineImageID

regions:
- eu-west-1
